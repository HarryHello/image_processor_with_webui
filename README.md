# 简单图像处理程序

## 项目简介

本项目是一个简单的图像处理程序，实现图像I/O、数据压缩、彩色转灰度和图像缩放等基本功能。项目采用C++语言实现，使用OpenCV作为图像处理库，并提供了命令行界面和Web界面两种交互方式。程序支持ppm图像处理（以及后续扩展的其他格式图像处理），并通过合理的代码结构设计，为后续UI扩展提供了良好基础。
要求完全实现代码的可迁移性，把所需要的opencv打包在项目当中。

## 项目要求说明

根据课程要求，本项目需完成以下核心功能：

1. **图像数据的读取与写入存储**
   - 读取图像文件
   - 通过OpenCV展示图像
   - 保存处理后的图像

2. **图像数据的压缩存储**
   - 将图像表示为三元组结构（行、列、像素值）
   - 实现三元组数据的压缩存储
   - 支持压缩数据的解码与还原

3. **彩色图像转灰度图像**
   - 将彩色图像转换为灰度图像
   - 保存并展示转换结果

4. **图像尺寸缩放**
   - 将图片放大为指定尺寸
   - 将图片缩小为指定尺寸

## 文件结构说明

```
IMAGE_PROCESSOR/
├── .vscode/                  # VS Code配置文件，包含编译和调试设置
├── 3rdparty/                 # 第三方依赖库
│   └── opencv-mingw/         # 专为MinGW编译的OpenCV库
│       ├── include/opencv2/  # OpenCV头文件
│       └── x64/              # OpenCV 64位库文件
├── assets/                   # 测试图像资源
│   ├── color-block.ppm       # 彩色测试图像（用于灰度转换）
│   ├── lena-128-gray.ppm     # 128×128灰度测试图像（用于放大）
│   └── lena-512-gray.ppm     # 512×512灰度测试图像（用于缩小）
├── build/                    # 编译输出目录（自动生成）
├── include/                  # 项目头文件
│   ├── color_processing.hpp  # 灰度转换功能声明
│   ├── compression.hpp       # 图像压缩功能声明
│   ├── image_io.hpp          # 图像I/O功能声明
│   ├── logger.hpp            # 日志功能声明
│   └── image_scaling.hpp     # 图像缩放功能声明
├── src/                      # 源代码目录
│   ├── core/                 # 核心图像处理实现
│   │   ├── color_processing.cpp  # 灰度转换实现
│   │   ├── compression.cpp       # 三元组压缩实现
│   │   ├── image_io.cpp          # 图像读写实现
│   │   ├── logger.cpp            # 日志功能实现
│   │   └── image_scaling.cpp     # 图像缩放实现
│   ├── ui/                   # 用户界面相关
│   │   └── web_server.cpp    # Web服务器实现（支持本地网页UI）
│   └── main.cpp              # 程序入口（命令行版本）
├── web/                      # Web前端资源
│   ├── index.html            # Web界面主文件
│   ├── script.js             # 前端交互脚本
│   └── style.css             # 前端样式定义
├── CMakeLists.txt            # 项目构建配置文件
└── README.md                 # 本文件
```

## 功能模块说明

### 1. 核心图像处理模块 (src/core/)

- **image_io.cpp**：负责图像的读写操作，提供与OpenCV的接口
- **color_processing.cpp**：实现彩色图像转灰度图像功能
- **compression.cpp**：实现三元组结构存储和压缩/解压缩功能
- **image_scaling.cpp**：实现图像缩放功能，支持不同插值算法

### 2. 用户界面模块 (src/ui/)

- **main.cpp**：命令行界面入口，可直接运行进行图像处理
- **web_server.cpp**：Web服务器实现，提供本地网页UI界面

### 3. Web前端 (web/)

- **index.html**：提供图像上传、处理选项和结果展示的界面
- **script.js**：处理前端交互逻辑，与后端Web服务通信
- **style.css**：定义UI样式，确保界面美观易用

## 技术特点

1. **便携式OpenCV集成**：
   - 使用预编译的MinGW版本OpenCV，无需目标机器安装OpenCV
   - 将所有依赖打包在3rdparty目录中，确保项目可移植性

2. **清晰的代码结构**：
   - 功能模块化设计，核心处理与UI分离
   - 头文件与实现文件分离，符合C++最佳实践
   - 为未来功能扩展预留空间

3. **双界面支持**：
   - 命令行界面：满足基本作业要求
   - Web界面：提供友好交互体验，作为加分项

4. **跨平台构建**：
   - 通过CMake构建系统，支持多种编译环境
   - 适配MinGW工具链，确保Windows平台兼容性

## 项目使用说明

1. **编译运行**：
   - 通过CMake生成项目文件
   - 编译后执行build目录中的可执行文件
   - Web界面可通过浏览器访问localhost

2. **功能测试**：
   - 命令行模式：直接运行程序处理assets目录中的测试图像
   - Web界面：上传图像并选择处理功能，查看实时结果

3. **扩展开发**：
   - 在src/core/添加新的图像处理功能
   - 通过web/目录扩展UI功能
   - 保持核心功能与UI的分离设计


Project 2 简单图像处理程序（选题一）
【问题描述】
图像处理与矩阵操作之间存在密切的联系，一般的灰度图像与彩色图像，可以表示为矩阵形式，从而完成某种图像处理或编辑的任务。本实验将通过对矩阵形式的数据进行操作，探索简单的图像处理实现方式。
【实现要求】
   (1) 图像数据的读取与写入存储，并可通过第三方库调用UI窗口展示图片。
(2) 实现图像数据的压缩存储。首先读取图像，并将图像信息以三元组结构存储。其次，对三元组数据进行压缩存储，以实现数据压缩的功能。最后，将压缩后的数据进行读取，解码，得到原始的图像数据，并进行保存。
(3) 彩色图像转变为灰度图像。将彩色的“color-block.ppm”图像转换为灰度图像，并进行保存和展示。
(4) 实现图像尺寸的缩放。例如将“lena-128-gray.ppm”图像放大为256x256大小；或将“lena-512-gray.ppm”图像缩小为256x256大小。
【测试数据】
本实验提供了ppm格式的图像，以及其对应的png格式图像，见附件。
 
PNG格式文件可以使用一般的图像查看软件打开，PPM格式文件可以使用XnView软件打开（https://www.xnview.com/en/）。




